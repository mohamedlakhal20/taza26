<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TazaShop - تسوق من مدينتك</title>
    <style>
        :root {
            --primary-color: #e74c3c;
            --secondary-color: #c0392b;
            --dark-color: #2c3e50;
            --black-color: #1a1a1a;
            --light-color: #f5f5f5;
            --white-color: #ffffff;
            --text-color: #333333;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--white-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        /* باقي أنماط CSS كما هي */
        
        .product-slider-container {
            position: relative;
            height: 200px;
            overflow: hidden;
            width: 100%;
        }
        
        .slides-container {
            display: flex;
            height: 100%;
            transition: transform 0.5s ease;
        }
        
        .product-slide {
            min-width: 100%;
            height: 100%;
            position: relative;
        }
        
        .product-slide img,
        .product-slide video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .product-slider {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            z-index: 2;
        }
        
        .slider-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.5);
            margin: 0 3px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .slider-dot.active {
            background-color: var(--primary-color);
            width: 20px;
            border-radius: 4px;
        }
        
        /* باقي الأنماط كما هي */
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- باقي HTML كما هو -->

    <script>
        // قائمة المنتجات المعدلة
        const products = [
            {
                id: 1,
                name: "منتج بصورة واحدة",
                category: "فئة تجريبية",
                media: [
                    {type: 'image', url: "https://via.placeholder.com/800x600?text=صورة+واحدة"}
                ],
                description: "هذا المنتج يحتوي على صورة واحدة فقط",
                price: "100 درهم",
                likes: 5,
                whatsapp: "212694948239"
            },
            {
                id: 2,
                name: "منتج بصورتين",
                category: "فئة تجريبية",
                media: [
                    {type: 'image', url: "https://via.placeholder.com/800x600?text=صورة+1"},
                    {type: 'image', url: "https://via.placeholder.com/800x600?text=صورة+2"}
                ],
                description: "هذا المنتج يحتوي على صورتين تتبادلان التظهر",
                price: "200 درهم",
                likes: 8,
                whatsapp: "212694948239"
            },
            {
                id: 3,
                name: "منتج بثلاث صور",
                category: "فئة تجريبية",
                media: [
                    {type: 'image', url: "https://via.placeholder.com/800x600?text=صورة+1"},
                    {type: 'image', url: "https://via.placeholder.com/800x600?text=صورة+2"},
                    {type: 'image', url: "https://via.placeholder.com/800x600?text=صورة+3"}
                ],
                description: "هذا المنتج يحتوي على ثلاث صور تتبادل التظهر",
                price: "300 درهم",
                likes: 12,
                whatsapp: "212694948239"
            }
        ];

        // دالة عرض المنتجات المعدلة
        function displayProducts(productsToDisplay) {
            const container = document.getElementById('products-container');
            container.innerHTML = '';
            
            productsToDisplay.forEach(product => {
                const productElement = document.createElement('div');
                productElement.className = 'product';
                productElement.setAttribute('data-id', product.id);
                
                let slidesHTML = '';
                let dotsHTML = '';
                
                product.media.forEach((item, index) => {
                    const activeClass = index === 0 ? 'active' : '';
                    if (item.type === 'image') {
                        slidesHTML += `
                            <div class="product-slide ${activeClass}">
                                <img src="${item.url}" alt="${product.name}" loading="lazy">
                            </div>
                        `;
                    } else {
                        slidesHTML += `
                            <div class="product-slide ${activeClass}">
                                <video src="${item.url}" poster="${item.poster}" autoplay muted loop playsinline></video>
                            </div>
                        `;
                    }
                    
                    // إضافة نقاط التمرير فقط إذا كان هناك أكثر من صورة
                    if (product.media.length > 1) {
                        dotsHTML += `<div class="slider-dot ${activeClass}" data-index="${index}"></div>`;
                    }
                });
                
                productElement.innerHTML = `
                    <div class="product-slider-container">
                        <div class="slides-container">
                            ${slidesHTML}
                        </div>
                        ${product.media.length > 1 ? `<div class="product-slider">${dotsHTML}</div>` : ''}
                    </div>
                    <div class="product-content">
                        <h3 class="product-title">${product.name}</h3>
                        <span class="product-category">${product.category}</span>
                        <div class="product-price">${product.price}</div>
                        <div class="product-actions">
                            <div>
                                <button class="like-btn" id="like-${product.id}">
                                    ❤
                                </button>
                                <span class="likes-count" id="likes-count-${product.id}">${product.likes}</span>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(productElement);
                
                // بدء الشرائح إذا كان هناك أكثر من صورة
                if (product.media.length > 1) {
                    initSlider(product.id, product.media.length);
                }
            });
        }

        // دالة تهيئة السلايدر
        function initSlider(productId, mediaCount) {
            const productElement = document.querySelector(`.product[data-id="${productId}"]`);
            const slidesContainer = productElement.querySelector('.slides-container');
            const slides = productElement.querySelectorAll('.product-slide');
            const dots = productElement.querySelectorAll('.slider-dot');
            let currentIndex = 0;
            
            // تحديد عرض الحاوية بناءً على عدد الشرائح
            slidesContainer.style.width = `${mediaCount * 100}%`;
            
            // تحديد عرض كل شريحة
            slides.forEach(slide => {
                slide.style.width = `${100 / mediaCount}%`;
            });
            
            // دالة تغيير الشريحة
            const goToSlide = (index) => {
                const slideWidth = 100 / mediaCount;
                slidesContainer.style.transform = `translateX(-${index * slideWidth}%)`;
                
                // تحديث النقاط النشطة
                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });
                
                currentIndex = index;
            };
            
            // التبديل التلقائي كل 3 ثوان (فقط إذا كان هناك أكثر من صورة)
            if (mediaCount > 1) {
                const slideInterval = setInterval(() => {
                    const nextIndex = (currentIndex + 1) % mediaCount;
                    goToSlide(nextIndex);
                }, 3000);
                
                // أحداث النقر على النقاط
                dots.forEach(dot => {
                    dot.addEventListener('click', () => {
                        clearInterval(slideInterval);
                        const targetIndex = parseInt(dot.getAttribute('data-index'));
                        goToSlide(targetIndex);
                    });
                });
            }
        }

        // استدعاء displayProducts عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            displayProducts(products);
        });

        // باقي الدوال (البحث، التصفية، الإعجاب...) كما هي
    </script>
</body>
</html>
